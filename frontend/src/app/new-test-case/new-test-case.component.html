<div class="form-container">
  <div class="form-header">
    <h2>ğŸ“ Ãšj teszteset lÃ©trehozÃ¡sa</h2>
    <p style="opacity: 0.9; margin-top: 8px;">TÃ¶ltsd ki a teszteset alapadatait Ã©s lÃ©pÃ©seit</p>
  </div>

  <form (ngSubmit)="save()" #testForm="ngForm" class="form-body">
    <div class="form-group">
      <label class="form-label">Teszteset cÃ­me *</label>
      <input
        type="text"
        class="form-input"
        placeholder="Adja meg a teszteset cÃ­mÃ©t"
        [(ngModel)]="testCase.title"
        name="title"
        required
        [class.invalid]="testForm.submitted && !testCase.title"
      />
    </div>

    <div class="form-row">
      <div class="form-group">
        <label class="form-label">KategÃ³ria</label>
        <select class="form-input" [(ngModel)]="testCase.category" name="category">
          <option value="Authentication">Authentication</option>
          <option value="API Testing">API Testing</option>
          <option value="UI Testing">UI Testing</option>
        </select>
      </div>
      <div class="form-group">
        <label class="form-label">PrioritÃ¡s</label>
        <select class="form-input" [(ngModel)]="testCase.priority" name="priority">
          <option value="Magas">Magas</option>
          <option value="KÃ¶zepes">KÃ¶zepes</option>
          <option value="Alacsony">Alacsony</option>
        </select>
      </div>
      <div class="form-group">
        <label class="form-label">Ãllapot</label>
        <select class="form-input" [(ngModel)]="testCase.status" name="status">
          <option value="VÃ¡zlat">VÃ¡zlat</option>
          <option value="KÃ©sz">KÃ©sz</option>
          <option value="Elavult">Elavult</option>
        </select>
      </div>
    </div>

    <div class="form-group">
      <label class="form-label">LeÃ­rÃ¡s</label>
      <textarea class="form-textarea" placeholder="Teszteset rÃ©szletes leÃ­rÃ¡sa..." [(ngModel)]="testCase.description" name="description"></textarea>
    </div>

    <div class="form-group">
      <label class="form-label">ElÅ‘feltÃ©telek</label>
      <textarea class="form-textarea" placeholder="Teszteset vÃ©grehajtÃ¡sÃ¡nak elÅ‘feltÃ©telei..." [(ngModel)]="testCase.preconditions" name="preconditions"></textarea>
    </div>

    <div class="steps-section">
      <h3 style="margin-bottom: 20px; color: #111827;">ğŸ”¢ TesztlÃ©pÃ©sek</h3>
      <div *ngFor="let step of testCase.steps; let i = index" class="step-item">
        <div class="step-header">
          <div class="step-number">{{step.number}}</div>
          <div class="step-controls">
            <button type="button" class="btn-icon btn-delete" (click)="removeStep(i)">ğŸ—‘ï¸</button>
          </div>
        </div>
        <div class="form-group">
          <label class="form-label">MÅ±velet</label>
          <textarea class="form-textarea" [(ngModel)]="testCase.steps[i].text" name="step-{{i}}" style="min-height: 60px;"></textarea>
        </div>
      </div>
      <div style="display: flex; gap: 10px; margin-top: 10px;">
        <input type="text" class="form-input" placeholder="Ãšj lÃ©pÃ©s leÃ­rÃ¡sa..." [(ngModel)]="step" name="newStep" (keyup.enter)="addStep()">
        <button type="button" class="btn-add" (click)="addStep()">+ Ãšj lÃ©pÃ©s</button>
      </div>
    </div>

    <div *ngIf="errorMessage" class="error-message">
      {{ errorMessage }}
    </div>

    <div class="form-actions">
      <button type="button" class="btn-cancel" (click)="router.navigate(['/test-cases'])">MÃ©gse</button>
      <button type="submit" class="btn-primary">ğŸ’¾ MentÃ©s</button>
    </div>
  </form>
</div>
